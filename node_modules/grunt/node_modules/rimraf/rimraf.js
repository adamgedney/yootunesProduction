function rimraf(e,t){if(!t)throw new Error("No callback passed to rimraf()");var n=0;rimraf_(e,function r(i){if(i){if(isWindows&&(i.code==="EBUSY"||i.code==="ENOTEMPTY")&&n<exports.BUSYTRIES_MAX){n++;var s=n*100;return setTimeout(function(){rimraf_(e,r)},s)}if(i.code==="EMFILE"&&timeout<exports.EMFILE_MAX)return setTimeout(function(){rimraf_(e,r)},timeout++);i.code==="ENOENT"&&(i=null)}timeout=0,t(i)})}function rimraf_(e,t){fs.unlink(e,function(n){if(n){if(n.code==="ENOENT")return t(null);if(n.code==="EPERM")return isWindows?fixWinEPERM(e,n,t):rmdir(e,n,t);if(n.code==="EISDIR")return rmdir(e,n,t)}return t(n)})}function fixWinEPERM(e,t,n){fs.chmod(e,666,function(r){r?n(r.code==="ENOENT"?null:t):fs.stat(e,function(r,i){r?n(r.code==="ENOENT"?null:t):i.isDirectory()?rmdir(e,t,n):fs.unlink(e,n)})})}function fixWinEPERMSync(e,t,n){try{fs.chmodSync(e,666)}catch(r){if(r.code!=="ENOENT")throw t}try{var i=fs.statSync(e)}catch(s){if(s!=="ENOENT")throw t}i.isDirectory()?rmdirSync(e,t):fs.unlinkSync(e)}function rmdir(e,t,n){fs.rmdir(e,function(r){!r||r.code!=="ENOTEMPTY"&&r.code!=="EEXIST"&&r.code!=="EPERM"?r&&r.code==="ENOTDIR"?n(t):n(r):rmkids(e,n)})}function rmkids(e,t){fs.readdir(e,function(n,r){if(n)return t(n);var i=r.length;if(i===0)return fs.rmdir(e,t);var s;r.forEach(function(n){rimraf(path.join(e,n),function(n){if(s)return;if(n)return t(s=n);--i===0&&fs.rmdir(e,t)})})})}function rimrafSync(e){try{fs.unlinkSync(e)}catch(t){if(t.code==="ENOENT")return;if(t.code==="EPERM")return isWindows?fixWinEPERMSync(e,t):rmdirSync(e,t);if(t.code!=="EISDIR")throw t;rmdirSync(e,t)}}function rmdirSync(e,t){try{fs.rmdirSync(e)}catch(n){if(n.code==="ENOENT")return;if(n.code==="ENOTDIR")throw t;(n.code==="ENOTEMPTY"||n.code==="EEXIST"||n.code==="EPERM")&&rmkidsSync(e)}}function rmkidsSync(e){fs.readdirSync(e).forEach(function(t){rimrafSync(path.join(e,t))}),fs.rmdirSync(e)}module.exports=rimraf,rimraf.sync=rimrafSync;var path=require("path"),fs=require("fs"),timeout=0;exports.EMFILE_MAX=1e3,exports.BUSYTRIES_MAX=3;var isWindows=process.platform==="win32";