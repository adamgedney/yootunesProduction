function JSONParser(){this.data=new Buffer(""),this.bytesWritten=0}global.GENTLY&&(require=GENTLY.hijack(require));var Buffer=require("buffer").Buffer;exports.JSONParser=JSONParser,JSONParser.prototype.initWithLength=function(e){this.data=new Buffer(e)},JSONParser.prototype.write=function(e){return this.data.length>=this.bytesWritten+e.length?e.copy(this.data,this.bytesWritten):this.data=Buffer.concat([this.data,e]),this.bytesWritten+=e.length,e.length},JSONParser.prototype.end=function(){try{var e=JSON.parse(this.data.toString("utf8"));for(var t in e)this.onField(t,e[t])}catch(n){}this.data=null,this.onEnd()};