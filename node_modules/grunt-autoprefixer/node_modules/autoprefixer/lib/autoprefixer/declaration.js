(function(){var e,t;t=require("./utils"),e=function(){function e(e,t,n,r,i){this.rule=e,this.number=t,this.node=n,this.prefix=r,this.unprefixed=i,this.prop=this.node.property,this.value=this.node.value,this.valuesCache={}}return e.register=function(e){var t,n,r,i,s;i=e.names,s=[];for(n=0,r=i.length;n<r;n++)t=i[n],s.push(this.hacks[t]=e);return s},e.hacks={},e.load=function(t,n,r){var i,s,o,u;return u=this.split(r.property),s=u[0],o=u[1],i=this.hacks[o],i?new i(t,n,r,s,o):new e(t,n,r,s,o)},e.split=function(e){var t,n,r;return e[0]==="-"?(n=e.indexOf("-",1)+1,t=e.slice(0,n),r=e.slice(n),[t,r]):["",e]},e.prototype.valueContain=function(e){var t=this;return e.some(function(e){return t.value.indexOf(e)!==-1})},e.prototype.prefixProp=function(e,t){t==null&&(t=this.value);if(this.rule.contain(e+this.unprefixed))return;return this.insertBefore(e+this.unprefixed,t)},e.prototype.insertBefore=function(e,n){var r;if(this.rule.contain(e,n))return;return r=t.clone(this.node,{property:e,value:n}),this.rule.add(this.number,r),this.number+=1},e.prototype.remove=function(){return this.rule.removeDecl(this.number)},e.prototype.prefixValue=function(e,t){var n;return n=this.valuesCache[e]||this.value,this.valuesCache[e]=t.addPrefix(e,n)},e.prototype.setValue=function(e){return this.value=this.node.value=e},e.prototype.saveValues=function(){var e,n,r,i,s;i=this.valuesCache,s=[];for(e in i){n=i[e],r=t.removeNote(e);if(this.rule.prefix&&r!==this.rule.prefix)continue;r===this.prefix?s.push(this.setValue(n)):this.rule.byProp(r+this.unprefixed)?s.push(void 0):s.push(this.insertBefore(this.prop,n))}return s},e}(),module.exports=e}).call(this);