(function(){var e,t;t=require("./utils"),e=function(){function e(e,t){this.data=e,this.selected=this.parse(t)}return e.prototype.parse=function(e){var n,r=this;return e instanceof Array||(e=[e]),n=[],e.map(function(e){var i,s,o,u;u=r.requirements;for(o in u){i=u[o];if(s=e.match(i.regexp)){n=n.concat(i.select.apply(r,s.slice(1)));return}}return t.error("Unknown browser requirement `"+e+"`")}),t.uniq(n)},e.prototype.aliases={fx:"ff"},e.prototype.requirements={none:{regexp:/^none$/i,select:function(){return[]}},lastVersions:{regexp:/^last (\d+) versions?$/i,select:function(e){return this.browsers(function(t){return t.minor?[]:t.versions.slice(0,e)})}},globalStatistics:{regexp:/^> (\d+(\.\d+)?)%$/,select:function(e){return this.browsers(function(t){return t.versions.filter(function(n,r){return t.popularity[r]>e})})}},newerThen:{regexp:/^(\w+) (>=?)\s*([\d\.]+)/,select:function(e,n,r){var i,s;return e=this.aliases[e]||e,i=this.data[e],r=parseFloat(r),i||t.error("Unknown browser "+e),n===">"?s=function(e){return e>r}:n===">="&&(s=function(e){return e>=r}),i.versions.filter(s).map(function(t){return""+e+" "+t})}},direct:{regexp:/^(\w+) ([\d\.]+)$/,select:function(e,n){var r,i,s;return e=this.aliases[e]||e,r=this.data[e],n=parseFloat(n),r||t.error("Unknown browser "+e),s=r.future?r.future[0]:r.versions[0],i=r.versions[r.versions.length-1],n>s?n=s:n<i&&(n=i),[""+e+" "+n]}}},e.prototype.browsers=function(e){var t,n,r,i,s;r=[],s=this.data;for(t in s)n=s[t],i=e(n).map(function(e){return""+t+" "+e}),r=r.concat(i);return r},e.prototype.prefixes=function(){var e,n;return this.prefixesCache||(this.prefixesCache=t.uniq(function(){var t,r;t=this.data,r=[];for(n in t)e=t[n],r.push(e.prefix);return r}.call(this)).sort(function(e,t){return t.length-e.length}))},e.prototype.prefix=function(e){var t,n,r;return r=e.split(" "),t=r[0],n=r[1],t==="opera"&&parseFloat(n)>=15?"-webkit-":this.data[t].prefix},e.prototype.isSelected=function(e){return this.selected.indexOf(e)!==-1},e}(),module.exports=e}).call(this);