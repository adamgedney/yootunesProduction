function Compiler(e){e=e||{},Base.call(this,e),this.indentation=e.indent}var Base=require("./compiler");module.exports=Compiler,Compiler.prototype.__proto__=Base.prototype,Compiler.prototype.compile=function(e){return this.stylesheet(e)},Compiler.prototype.stylesheet=function(e){return this.mapVisit(e.stylesheet.rules,"\n\n")},Compiler.prototype.comment=function(e){return this.emit(this.indent()+"/*"+e.comment+"*/",e.position)},Compiler.prototype.import=function(e){return this.emit("@import "+e.import+";",e.position)},Compiler.prototype.media=function(e){return this.emit("@media "+e.media,e.position,!0)+this.emit(" {\n"+this.indent(1))+this.mapVisit(e.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")},Compiler.prototype.document=function(e){var t="@"+(e.vendor||"")+"document "+e.document;return this.emit(t,e.position,!0)+this.emit("  {\n"+this.indent(1))+this.mapVisit(e.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")},Compiler.prototype.charset=function(e){return this.emit("@charset "+e.charset+";",e.position)},Compiler.prototype.namespace=function(e){return this.emit("@namespace "+e.namespace+";",e.position)},Compiler.prototype.supports=function(e){return this.emit("@supports "+e.supports,e.position,!0)+this.emit(" {\n"+this.indent(1))+this.mapVisit(e.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")},Compiler.prototype.keyframes=function(e){return this.emit("@"+(e.vendor||"")+"keyframes "+e.name,e.position,!0)+this.emit(" {\n"+this.indent(1))+this.mapVisit(e.keyframes,"\n")+this.emit(this.indent(-1)+"}")},Compiler.prototype.keyframe=function(e){var t=e.declarations;return this.emit(this.indent())+this.emit(e.values.join(", "),e.position,!0)+this.emit(" {\n"+this.indent(1))+this.mapVisit(t,"\n")+this.emit(this.indent(-1)+"\n"+this.indent()+"}\n")},Compiler.prototype.page=function(e){var t=e.selectors.length?e.selectors.join(", ")+" ":"";return this.emit("@page "+t,e.position,!0)+this.emit("{\n")+this.emit(this.indent(1))+this.mapVisit(e.declarations,"\n")+this.emit(this.indent(-1))+this.emit("\n}")},Compiler.prototype.rule=function(e){var t=this.indent(),n=e.declarations;return n.length?this.emit(e.selectors.map(function(e){return t+e}).join(",\n"),e.position,!0)+this.emit(" {\n")+this.emit(this.indent(1))+this.mapVisit(n,"\n")+this.emit(this.indent(-1))+this.emit("\n"+this.indent()+"}"):""},Compiler.prototype.declaration=function(e){return this.emit(this.indent())+this.emit(e.property+": "+e.value,e.position)+this.emit(";")},Compiler.prototype.indent=function(e){return this.level=this.level||1,null!=e?(this.level+=e,""):Array(this.level).join(this.indentation||"  ")};